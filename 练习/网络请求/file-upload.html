<!DOCTYPE html>
<html>
<body>
  <input type="file" id="fileInput" accept="image/*">
  <button onclick="uploadFile()">上传文件</button>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById('fileInput');
      const file = fileInput.files[0];
      
      if (!file) {
        alert('请选择文件');
        return;
      }

      // 创建 FormData 存储文件
      const formData = new FormData();
      formData.append('avatar', file); // 'avatar' 是后端接收的字段名
      formData.append('description', '用户头像'); // 可以附加其他字段

      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
          method: 'POST',
          headers: {
            'Authorization': 'Bearer YOUR_TOKEN'
            // 不需要设置 Content-Type，浏览器会自动处理
          },
          body: formData
        });

        if (!response.ok) throw new Error(`上传失败: ${response.status}`);
        
        const result = await response.json();
        console.log('上传成功:', result);
        alert('文件上传成功');
      } catch (error) {
        console.error('上传错误:', error.message);
        alert('上传失败: ' + error.message);
      }
    }
  </script>
</body>
</html>
